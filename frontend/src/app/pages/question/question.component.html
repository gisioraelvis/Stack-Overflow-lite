<div class="question-page">
    <div class="top-section">
        <div class="ask-question">
            <button mat-raised-button routerLink="/questions/ask" color="accent">
                Ask a Question
            </button>
        </div>
    </div>
    <div class="question-section">
        <app-progress-spinner *ngIf="loading"></app-progress-spinner>
        <ng-container *ngIf="(question$ | async ) as question; else noquestion">
            <app-question class="question" [question]="question"></app-question>
        </ng-container>
    </div>
    <ng-template #noquestion>
        <div class="no-question" *ngIf="!loading">
            <p>The question does not exist.</p>
            <button mat-raised-button color="accent" (click)="goBack()">Go Back</button>
        </div>
    </ng-template>
    <div class="comments-section">
        <div class="comments-title">
            <h2>Comments</h2>
        </div>
        <app-progress-spinner *ngIf="loading"></app-progress-spinner>
        <ng-container *ngIf="(comments$ | async ) as comments">
            <div class="question-comments" *ngIf="comments.length>0">
                <!-- TODO: Pass the type of comment and the id -->
                <app-comment class="question-comment" *ngFor="let comment of comments"
                    [comment]="comment"></app-comment>
            </div>
        </ng-container>
        <div class="add-comment">
            <app-add-comment></app-add-comment>
        </div>
    </div>
    <mat-divider></mat-divider>
    <div class="answers-section">
        <app-progress-spinner *ngIf="loading"></app-progress-spinner>
        <ng-container *ngIf="(answers$ | async ) as answers">
            <div class="answers-title">
                <h2>Answers({{answers.length}})</h2>
            </div>
            <div class="answers">
                <div class="answers" *ngIf="answers.length>0">
                    <app-answer class="answer" *ngFor="let answer of answers" [answer]="answer"></app-answer>
                </div>
            </div>
        </ng-container>
        <div class="add-answer-section">
            <h2>Your Answer</h2>
            <app-add-answer class="add-answer"></app-add-answer>
        </div>
    </div>
</div>